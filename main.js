!function(){"use strict";var e={665:function(e,t,s){e.exports=s.p+"df100efc54d4645073d7.jpg"},291:function(e,t,s){e.exports=s.p+"8edfe6cd78e39aafc871.jpg"},822:function(e,t,s){e.exports=s.p+"44e6fede87f55e5327cc.jpg"},328:function(e,t,s){e.exports=s.p+"e463b225f0897d749d63.jpg"},705:function(e,t,s){e.exports=s.p+"70aac30a40409c4dbc71.jpg"},561:function(e,t,s){e.exports=s.p+"2e37fd0c260a298af732.jpg"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.m=e,s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.b=document.baseURI||self.location.href,function(){new URL(s(561),s.b),new URL(s(822),s.b),new URL(s(665),s.b),new URL(s(328),s.b),new URL(s(705),s.b),new URL(s(291),s.b);const e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};class t{constructor(e,t){let{cardData:s,handleCardClick:r,handleDeleteSubmit:n,handleCardLike:i}=e;this._name=s.name,this._link=s.link,this._cardID=s._id,this._userID=s._userID,this._cardLike=s.likes,this._handleCardClick=r,this._handleDeleteSubmit=n,this._handleCardLike=i,this._cardSelector=t}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_updateCardLike(e){this._cardLike=e}_setEvenetListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteSubmit(this._cardID)})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({link:this._link,name:this._name})}))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){return this._cardElement=this._getTemplate(),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__name").textContent=this._name,this._setEvenetListeners(),this._cardElement}}class r{constructor(e,t){this._settings=e,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleSubmitButton(),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleSubmitButton()}),0)})),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleSubmitButton()}))}))}_toggleSubmitButton(){this._hasInvalidInput(this._inputList)?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._cardSection=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._cardSection.prepend(e)}}class i{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".popup__close")}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>{this.close()}))}}class o extends i{constructor(e,t,s){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._popupInputs=this._popupElement.querySelectorAll(".popup__input"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".popup__button"),this._defaultTextOnButton=this._submitButton.textContent,this._loadingText=s}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._popupInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}showLoading(){this._submitButton.textContent=this._loadingText}hideLoading(){this._submitButton.textContent=this._defaultTextOnButton}}const a=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkServerRes=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`);getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkServerRes)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkServerRes)}editProfile(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:"Marie SkÅ‚odowska Curie",about:"Physicist and Chemist"})}).then(this._checkServerRes)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkServerRes)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkServerRes)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkServerRes)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkServerRes)}updateProfilePic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._checkServerRes)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c48cc533-37fe-4aec-bc10-a2c7c93d6979","Content-Type":"application/json"}});function c(e){const s=new t({cardData:e,handleCardClick:e=>{u.open(e)},handleDeleteSubmit:e=>{p.setSubmitAction((()=>{p.showLoading(),a.deleteCard(e).then((()=>{s._handleDeleteButton(),p.close()})).catch((e=>{console.error(e)})).finally((()=>{p.hideLoading()}))})),p.open()},handleCardLike:e=>{a.likeCard(e).then((()=>{s.updateCardLike(cardData.likes)})).catch((e=>console.error(e)))},handleCardUnlike:e=>{a.unlikeCard(e).then((()=>{s.updateCardLike(cardData.likes)})).catch((e=>console.error(e)))}},".card-template_type_default");return s.generateCard()}const l=document.querySelector(".cards__list");let h,d;Promise.all([a.getUserInfo(),a.getInitialCards()]).then((e=>{let[t,s]=e;C.setUserInfo(t.name,t.about),h=t._id,d=new n({items:s,renderer:e=>{const t=c(e);d.addItem(t)}},l),d.renderItems(s)})).catch((e=>console.error(e)));const u=new class extends i{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".popup__preview-image"),this._previewName=this._popupElement.querySelector(".popup__preview-name"),super.setEventListeners()}open(e){this._previewImage.src=e.link,this._previewImage.alt=e.name,this._previewName.textContent=e.name,super.open()}}("#preview-image-popup");u.close();const p=new class extends i{constructor(e,t){super({popupSelector:e}),this._popupConfirm=this._popupElement.querySelector(".popup__container"),this._confirmButton=this._popupConfirm.querySelector(".popup__confirm-button"),this._defaultTextOnButton=this._confirmButton.textContent,this._loadingText=t}setSubmitAction(e){this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._confirmButton.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmit()}))}showLoading(){this._confirmButton.textContent=this._loadingText}hideLoading(){this._confirmButton.textContent=this._defaultTextOnButton}}("#delete-card-popup","Deleting...");p.setEventListeners();const _=document.querySelector(".profile__image-overlay"),m=new o("#edit-avatar-popup",(e=>{m.showLoading(),a.updateProfilePic(e).then((()=>{k.src=e.link,m.close()})).catch((e=>console.error(e))).finally((()=>{m.hideLoading()}))}),"Saving...");_.addEventListener("click",(()=>{m.open()})),m.setEventListeners();const f=document.querySelector(".profile__add-button"),v=new o("#add-card-popup",(e=>{v.showLoading(),a.addNewCard(e).then((e=>{const t=c(e);v.close(),d.addItem(t)})).catch((e=>console.error(e))).finally((()=>{v.hideLoading()}))}),"Creating...");f.addEventListener("click",(()=>{v.open()})),v.setEventListeners();const S=document.querySelector(".profile__name"),b=document.querySelector(".profile__description"),E=document.querySelector("#form-input-name"),L=document.querySelector("#form-input-description"),g=document.querySelector(".profile__edit-button"),C=new class{constructor(e,t){this._name=e,this._about=t}getUserInfo(){const e={};return e.profileName=this._name.textContent,e.profileAbout=this._about.textContent,e}setUserInfo(e,t){this._name.textContent=e,this._about.textContent=t}}(S,b),k=document.querySelector(".profile__image"),y=new o("#profile-edit-popup",(e=>{y.showLoading(),a.editProfile().then((()=>{C.setUserInfo(e.name,e.description),y.close()})).catch((e=>console.error(e))).finally((()=>{y.hideLoading()}))}),"Saving...");g.addEventListener("click",(()=>{const e=C.getUserInfo();E.value=e.profileName,L.value=e.profileAbout,y.open()})),y.setEventListeners();const w=[...document.querySelectorAll(e.formSelector)];console.log(w),w.forEach((t=>{new r(e,t).enableValidation()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b3RzdHJhcCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiY29uc3QgeW9zZW1pdGVWYWxsZXlJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMveW9zZW1pdGUuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBsYWtlTG91aXNlSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xha2UtbG91aXNlLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgYmFsZE1vdW50YWluc0ltYWdlID0gbmV3IFVSTChcbiAgXCIuLi9pbWFnZXMvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGxhdGVtYXJJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGF0ZW1hci5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZSA9IG5ldyBVUkwoXG4gIFwiLi4vaW1hZ2VzL3Zhbm9pc2UuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGxhZ29EaUJyYWllc0ltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9sYWdvLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiB5b3NlbWl0ZVZhbGxleUltYWdlLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IGxha2VMb3Vpc2VJbWFnZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBiYWxkTW91bnRhaW5zSW1hZ2UsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBsYXRlbWFySW1hZ2UsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBsYWdvRGlCcmFpZXNJbWFnZSxcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IGNhcmREYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZVN1Ym1pdCwgaGFuZGxlQ2FyZExpa2UgfSxcbiAgICBjYXJkU2VsZWN0b3JcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZElEID0gY2FyZERhdGEuX2lkO1xuICAgIHRoaXMuX3VzZXJJRCA9IGNhcmREYXRhLl91c2VySUQ7XG4gICAgdGhpcy5fY2FyZExpa2UgPSBjYXJkRGF0YS5saWtlcztcblxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQgPSBoYW5kbGVEZWxldGVTdWJtaXQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICAvLz09PT09PT09PT09PT09PT09RXZlbnQgSGFuZGxlcnM9PT09PT09PT09PT09PT09PT09PT09PT09PVxcXFxcbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfdXBkYXRlQ2FyZExpa2UoY2FyZExpa2UpIHtcbiAgICB0aGlzLl9jYXJkTGlrZSA9IGNhcmRMaWtlO1xuICB9XG4gIC8vPT09PT09PT09PT09PT09PT1FdmVudCBMaXN0ZW5lcnM9PT09PT09PT09PT09PT09PT09PT09PT09PVxcXFxcbiAgX3NldEV2ZW5ldExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCh0aGlzLl9jYXJkSUQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy89PT09PT09PT09PT09R2VuZXJhdGUgQ2FyZD09PT09PT09PT09PT09PT09PT09PT09PT09XFxcXFxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgLy9nZXQgdGhlIGNhcmQgdGVtcGxhdGVcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICAgIC8vYWRkIGRhdGFcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbmV0TGlzdGVuZXJzKCk7XG5cbiAgICAvL3JldHVybiB0aGUgY2FyZFxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgLy89PT09PT09PT09PT09PT09PUV2ZW50IExpc3RlbmVycz09PT09PT09PT09PT09PT09PT09PT09PT09XFxcXFxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcblxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy89PT09PT09PT09PT09PT09PUV2ZW50IEhhbmRsZXJzPT09PT09PT09PT09PT09PT09PT09PT09PT1cXFxcXG4gIF90b2dnbGVTdWJtaXRCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICAvLz09PT09PT09PT09PT0gVmFsaWRhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PVxcXFxcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRTZWN0aW9uKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NhcmRTZWN0aW9uID0gY2FyZFNlY3Rpb247XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NhcmRTZWN0aW9uLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIGxvYWRpbmdUZXh0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX3BvcHVwSW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9kZWZhdWx0VGV4dE9uQnV0dG9uID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2xvYWRpbmdUZXh0ID0gbG9hZGluZ1RleHQ7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIC8vY29sbGVjdHMgZGF0YSBmcm9tIGFsbCB0aGUgaW5wdXQgZmllbGRzIGFuZCByZXR1cm5zIHRoYXQgZGF0YSBhcyBhbiBvYmplY3RcbiAgICAvL2NyZWF0ZSBhbiBlbXB0eSBvYmplY3QgdG8gc3RvcmUgdGhlIGlucHV0IGRhdGFcbiAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcblxuICAgIC8vZ3JhYiBhbGwgdGhlIGlucHV0cyBhbmQgaXRlcmF0ZSB0aHJ1IHRvIHN0b3JlIHRoZSBkYXRhIHRvIHRoZSBvYmplY3RcbiAgICB0aGlzLl9wb3B1cElucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXREYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXREYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vd2hlbiBmb3JtIGlzIHN1Ym1pdHRlZCwgbWFrZSBnZXRJbnB1dFZhbHVlcyB0byBmaXJlXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBzaG93TG9hZGluZygpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nVGV4dDtcbiAgfVxuXG4gIGhpZGVMb2FkaW5nKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2RlZmF1bHRUZXh0T25CdXR0b247XG4gIH1cbn1cbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcblxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzXCI7XG5cbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJjNDhjYzUzMy0zN2ZlLTRhZWMtYmMxMC1hMmM3YzkzZDY5NzlcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLz09PT09PT09PT09PT09PT09PT09PT09IENyZWF0ZSBDYXJkIEluc3RhbmNlID09PT09PT09PT09PT09PT09PT09PVxcXFxcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGNhcmREYXRhOiBkYXRhLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoY2FyZEltYWdlKSA9PiB7XG4gICAgICAgIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oY2FyZEltYWdlKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGVTdWJtaXQ6IChjYXJkSUQpID0+IHtcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNob3dMb2FkaW5nKCk7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSUQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmRFbGVtZW50Ll9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlQ2FyZExpa2U6IChjYXJkSUQpID0+IHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmxpa2VDYXJkKGNhcmRJRClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVDYXJkTGlrZShjYXJkRGF0YS5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVDYXJkVW5saWtlOiAoY2FyZElEKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC51bmxpa2VDYXJkKGNhcmRJRClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVDYXJkTGlrZShjYXJkRGF0YS5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIi5jYXJkLXRlbXBsYXRlX3R5cGVfZGVmYXVsdFwiXG4gICk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZCgpO1xufVxuXG4vLz09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciBpbml0aWFsIGNhcmRzID09PT09PT09PT09PT09PT09PT09PVxcXFxcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xubGV0IHVzZXJJRDtcbmxldCBjYXJkU2VjdGlvbjtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXIsIGluaXRpYWxDYXJkc10pID0+IHtcbiAgICAvL3NldCBVSVxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIubmFtZSwgdXNlci5hYm91dCk7XG4gICAgdXNlcklEID0gdXNlci5faWQ7XG5cbiAgICAvL2NyZWF0ZSBhIHNlY3Rpb24gb2YgY2FyZHNcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgY2FyZExpc3RFbFxuICAgICk7XG5cbiAgICAvL3JlbmRlciBpbml0aWFsIGNhcmRzXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG5cbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUE9QVVBTID09PT09PT09PT09PT09PT09PT09PT09PT1cXFxcXG4vLyBwcmV2aXcgaW1hZ2UgcG9wdXBcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtcG9wdXBcIik7XG5wcmV2aWV3SW1hZ2VQb3B1cC5jbG9zZSgpO1xuXG4vLyBkZWxldGUgY2FyZCBwb3B1cFxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwQ29uZmlybShcIiNkZWxldGUtY2FyZC1wb3B1cFwiLCBcIkRlbGV0aW5nLi4uXCIpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEVkaXQgUHJvZmlsZSBBdmF0YXIgcG9wdXBcbmNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLW92ZXJsYXlcIik7XG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNlZGl0LWF2YXRhci1wb3B1cFwiLFxuICAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICBlZGl0QXZhdGFyUG9wdXAuc2hvd0xvYWRpbmcoKTtcbiAgICBhcGlcbiAgICAgIC51cGRhdGVQcm9maWxlUGljKGlucHV0VmFsdWVzKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBwcm9maWxlQXZhdGFyLnNyYyA9IGlucHV0VmFsdWVzLmxpbms7XG4gICAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGVkaXRBdmF0YXJQb3B1cC5oaWRlTG9hZGluZygpO1xuICAgICAgfSk7XG4gIH0sXG4gIFwiU2F2aW5nLi4uXCJcbik7XG5cbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuXG5lZGl0QXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gQWRkIG5ldyBjYXJkIHBvcHVwXG5jb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjYWRkLWNhcmQtcG9wdXBcIixcbiAgLy9oYW5kbGVGb3JtU3VtaXRcbiAgKGNhcmREYXRhKSA9PiB7XG4gICAgYWRkQ2FyZFBvcHVwLnNob3dMb2FkaW5nKCk7XG4gICAgYXBpXG4gICAgICAuYWRkTmV3Q2FyZChjYXJkRGF0YSlcbiAgICAgIC50aGVuKChpbnB1dERhdGEpID0+IHtcbiAgICAgICAgLy9jcmVhdGUgYSBuZXcgY2FyZFxuICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChpbnB1dERhdGEpO1xuICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBhZGRDYXJkUG9wdXAuaGlkZUxvYWRpbmcoKTtcbiAgICAgIH0pO1xuICB9LFxuICBcIkNyZWF0aW5nLi4uXCJcbik7XG5cbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy89PT09PT09PT09PT09PT09PT09PT09PSBQcm9maWxlIEVkaXQgRm9ybSA9PT09PT09PT09PT09PT09PT09PT1cXFxcXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWlucHV0LW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2Zvcm0taW5wdXQtZGVzY3JpcHRpb25cIlxuKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24pO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XG5cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LXBvcHVwXCIsXG4gIC8vaGFuZGxlRm9ybVN1bWl0XG4gIChkYXRhKSA9PiB7XG4gICAgcHJvZmlsZUVkaXRQb3B1cC5zaG93TG9hZGluZygpO1xuICAgIGFwaVxuICAgICAgLmVkaXRQcm9maWxlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHByb2ZpbGVFZGl0UG9wdXAuaGlkZUxvYWRpbmcoKTtcbiAgICAgIH0pO1xuICB9LFxuICBcIlNhdmluZy4uLlwiXG4pO1xuXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvL2ZpbGwgcHJvZmlsZSBGb3JtXG4gIGNvbnN0IHByb2ZpbGVEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGEucHJvZmlsZU5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURhdGEucHJvZmlsZUFib3V0O1xuXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbi8vaGFuZGxlIHN1Ym1pdFxucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBWYWxpZGF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PVxcXFxcbmNvbnN0IGZvcm1MaXN0ID0gW1xuICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpLFxuXTtcblxuY29uc29sZS5sb2coZm9ybUxpc3QpO1xuXG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XG4gIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm0pO1xuICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuICBfY2hlY2tTZXJ2ZXJSZXMgPSAocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfTtcblxuICAvLyAgIDAxLiBsb2FkaW5nIHVzZXIgaW5mbyBmcm9tIHRoZSBzZXJ2ZXJcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzKTtcbiAgfVxuXG4gIC8vICAgMDIuIGdldEluaXRpYWwgY2FyZHMgZGF0YVxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzKTtcbiAgfVxuXG4gIC8vICAgMDMuIGVkaXQgcHJvZmlsZVxuICBlZGl0UHJvZmlsZSh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogXCJNYXJpZSBTa8WCb2Rvd3NrYSBDdXJpZVwiLFxuICAgICAgICBhYm91dDogXCJQaHlzaWNpc3QgYW5kIENoZW1pc3RcIixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXMpO1xuICB9XG5cbiAgLy8gICAwNC4gYWRkIGEgbmV3IGNhcmRcbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1NlcnZlclJlcyk7XG4gIH1cblxuICAvLyAgIDA1LiBkZWxldGUgY2FyZCBwb3B1cFxuICBkZWxldGVDYXJkKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXMpO1xuICB9XG5cbiAgLy8gICAwNS4gbGlrZSBjYXJkXG4gIGxpa2VDYXJkKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXMpO1xuICB9XG5cbiAgLy8gICAwNi4gVU5saWtlIGNhcmRcbiAgdW5saWtlQ2FyZChjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzKTtcbiAgfVxuXG4gIC8vICAgMDUuIHVwZGF0ZWQgcHJvZmlsZSBwaWNcbiAgdXBkYXRlUHJvZmlsZVBpYyhpbnB1dFZhbHVlcykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogaW5wdXRWYWx1ZXMubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXMpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19wcmV2aWV3LWltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fcHJldmlldy1uYW1lXCJcbiAgICApO1xuXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIG9wZW4oY2FyZEltYWdlKSB7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGNhcmRJbWFnZS5saW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBjYXJkSW1hZ2UubmFtZTtcbiAgICB0aGlzLl9wcmV2aWV3TmFtZS50ZXh0Q29udGVudCA9IGNhcmRJbWFnZS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgbG9hZGluZ1RleHQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBDb25maXJtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRhaW5lclwiKTtcblxuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9wb3B1cENvbmZpcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19jb25maXJtLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9kZWZhdWx0VGV4dE9uQnV0dG9uID0gdGhpcy5fY29uZmlybUJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9sb2FkaW5nVGV4dCA9IGxvYWRpbmdUZXh0O1xuICB9XG5cbiAgc2V0U3VibWl0QWN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gY2FsbGJhY2s7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNob3dMb2FkaW5nKCkge1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nVGV4dDtcbiAgfVxuXG4gIGhpZGVMb2FkaW5nKCkge1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9kZWZhdWx0VGV4dE9uQnV0dG9uO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGFib3V0KSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8vcmV0dXJucyB0aGUgb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgdXNlclxuICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG4gICAgdXNlckRhdGFbXCJwcm9maWxlTmFtZVwiXSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgdXNlckRhdGFbXCJwcm9maWxlQWJvdXRcIl0gPSB0aGlzLl9hYm91dC50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdXNlckRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIC8vdGFrZXMgbmV3IHVzZXIgZGF0YSBhbmQgYWRkcyBvbiB0aGUgdGhlIHBhZ2VcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibyIsIm9iaiIsInByb3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJVUkwiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjYXJkRGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZVN1Ym1pdCIsImhhbmRsZUNhcmRMaWtlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSUQiLCJfaWQiLCJfdXNlcklEIiwiX2NhcmRMaWtlIiwibGlrZXMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZVN1Ym1pdCIsIl9oYW5kbGVDYXJkTGlrZSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl91cGRhdGVDYXJkTGlrZSIsImNhcmRMaWtlIiwiX3NldEV2ZW5ldExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9nZXRUZW1wbGF0ZSIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3RvZ2dsZVN1Ym1pdEJ1dHRvbiIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2lzVmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJhZGQiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsInNvbWUiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiY2FyZFNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NhcmRTZWN0aW9uIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImxvYWRpbmdUZXh0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX3BvcHVwSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX2RlZmF1bHRUZXh0T25CdXR0b24iLCJfbG9hZGluZ1RleHQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0RGF0YSIsImlucHV0IiwidmFsdWUiLCJlIiwic2hvd0xvYWRpbmciLCJoaWRlTG9hZGluZyIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tTZXJ2ZXJSZXMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJlZGl0UHJvZmlsZSIsInVzZXJEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZE5ld0NhcmQiLCJkZWxldGVDYXJkIiwiY2FyZElEIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwidXBkYXRlUHJvZmlsZVBpYyIsImlucHV0VmFsdWVzIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZUNhcmQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjYXJkSW1hZ2UiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsInVwZGF0ZUNhcmRMaWtlIiwiaGFuZGxlQ2FyZFVubGlrZSIsImNhcmRMaXN0RWwiLCJ1c2VySUQiLCJhbGwiLCJ1c2VyIiwiaW5pdGlhbENhcmRzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld05hbWUiLCJfcG9wdXBDb25maXJtIiwiX2NvbmZpcm1CdXR0b24iLCJjYWxsYmFjayIsIl9oYW5kbGVTdWJtaXQiLCJhdmF0YXJFZGl0QnV0dG9uIiwiZWRpdEF2YXRhclBvcHVwIiwicHJvZmlsZUF2YXRhciIsImFkZENhcmRCdG4iLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEJ0biIsIl9hYm91dCIsInByb2ZpbGVFZGl0UG9wdXAiLCJkZXNjcmlwdGlvbiIsInByb2ZpbGVEYXRhIiwicHJvZmlsZUFib3V0IiwiZm9ybUxpc3QiLCJsb2ciLCJmb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==